<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalabled=no" />
  <title>저희 결혼합니다 | 상민 ♥ 진희</title>

  <!-- OG / 공유 썸네일 (GitHub Pages 절대 경로) -->
  <meta property="og:title" content="저희 결혼합니다" />
  <meta property="og:description" content="2025년 12월 13일 (토) 오후 2시 · 더에스비웨딩컨벤션" />
  <meta property="og:image" content="https://smjhwedding.github.io/og-1200x630.jpg" />

  <!-- 내 폰트 프리로드 (루트 경로) -->
  <link rel="preload" href="/HakgyoansimGeurimilgiOTFR.otf" as="font" type="font/otf" crossorigin>
  <link rel="preload" href="/HakgyoansimGeurimilgiTTFR.ttf" as="font" type="font/ttf" crossorigin>

  <!-- 파비콘(선택) -->
  <link rel="icon" href="/favicon.ico" />

  <style>
  /* ===== Webfonts ===== */
  @font-face {
    font-family: "SUIT Variable";
    src: url("https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/woff2/SUIT-Variable.woff2") format("woff2-variations");
    font-weight: 100 900; font-style: normal; font-display: swap;
  }
  @font-face {
    font-family: "BM JUA";
    src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@1.1/BMJUA.woff") format("woff");
    font-weight: normal; font-style: normal; font-display: swap;
  }
  @font-face{
    font-family: "Hakgyoansim Geurimilgi";
    src:
      url("/HakgyoansimGeurimilgiOTFR.otf") format("opentype"),
      url("/HakgyoansimGeurimilgiTTFR.ttf") format("truetype");
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }

  :root{
    --accent: #edacb1;
    --ink: #313131;
    --bg: #fff;
    --soft-bg: #fff5f9;
    --muted: #777;
    --radius: 14px;
    --shadow: 0 8px 32px rgba(0,0,0,.06);
    --maxw: 560px;

    --font-sans: "SUIT Variable", "Noto Sans KR", Apple SD Gothic Neo, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
    --font-fancy: "Hakgyoansim Geurimilgi", "BM JUA", "SUIT Variable", system-ui, -apple-system, "Noto Sans KR", sans-serif;
  }
  *{box-sizing:border-box}
  html{font-size:16px}
  @media (max-width: 759px){ html{ font-size:17.5px } }

  /* 전체 폰트를 손글씨 폰트로 통일 + 가로 스크롤 방지 */
  html,body{
    margin:0;padding:0;background:var(--bg);color:var(--ink);
    font-family:var(--font-fancy);-webkit-font-smoothing:antialiased;
    overflow-x:hidden;
  }

  a{color:inherit;text-decoration:none}
  .wrap{max-width:var(--maxw);margin:0 auto;padding:18px}

  /* ===== HERO ===== */
  .hero{
    position:relative;overflow:hidden;border-radius:var(--radius);
    min-height:60vh;background:#000;
    color:#fff; display:flex; align-items:flex-end; justify-content:center; text-align:center; box-shadow:var(--shadow)
  }
  .hero-media{
    position:absolute; inset:0; z-index:0; display:block; width:100%; height:100%; object-fit:cover;
    animation: kenburnsPlus 26s ease-in-out infinite;
    filter: brightness(1.04) contrast(1.03) saturate(1.06);
    transform: scale(1.04);
    transform-origin: 50% 60%;
    will-change: transform;
  }
  /* 더 동적인 Ken Burns (줌+팬+살짝 회전, 왕복) */
  @keyframes kenburnsPlus{
    0%   { transform: scale(1.06) translate3d(0, 0, 0) rotate(.2deg); transform-origin: 48% 62%; }
    25%  { transform: scale(1.10) translate3d(-1.5%, -1.2%, 0) rotate(-.35deg); transform-origin: 45% 58%; }
    50%  { transform: scale(1.13) translate3d(1.0%, -1.6%, 0) rotate(.35deg);  transform-origin: 55% 52%; }
    75%  { transform: scale(1.10) translate3d(1.4%, 0.6%, 0) rotate(-.2deg);   transform-origin: 52% 66%; }
    100% { transform: scale(1.06) translate3d(0, 0, 0) rotate(.2deg);           transform-origin: 48% 62%; }
  }

  .hero::after{
    content:"";position:absolute;inset:0;
    background: linear-gradient(0deg, rgba(0,0,0,.28) 0%, rgba(0,0,0,.12) 40%, rgba(0,0,0,0) 80%);
    z-index:1
  }
  .hero::before{
    content:""; position:absolute; inset:-10%;
    background:
      radial-gradient(120% 80% at 50% 80%, rgba(0,0,0,0.22), transparent 60%),
      radial-gradient(120% 100% at 50% -10%, rgba(255,255,255,0.06), transparent 60%);
    z-index:1; pointer-events:none;
  }
  .hero-inner{position:relative;z-index:3;padding:46px 18px 30px}

  .date{margin-top:12px;line-height:1.45}
  .date .d1, .date .d2{display:block}
  .date .d1{font-size:1.08rem}
  .date .d2{font-size:1rem;opacity:.98}
  @media (max-width:759px){ .date .d2{font-size:1.02rem} }

  /* D-90 배지: 하얀 글씨 */
  .dday-badge{
    position:absolute;top:10px;left:50%;transform:translateX(-50%);
    z-index:4;
    background:rgba(0,0,0,.34); border:1px solid rgba(255,255,255,.45);
    padding:6px 10px;border-radius:999px;font-size:.78rem;backdrop-filter: blur(6px);
    color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.35);
  }

  /* ===== HERO 파티클: 보케 캔버스 ===== */
  .spark-layer{ position:absolute; inset:0; z-index:2; pointer-events:none; overflow:hidden; }
  .spark-layer canvas{ position:absolute; inset:0; width:100%; height:100%; filter: blur(0.4px) saturate(1.05); }

  /* ===== 공통 ===== */
  h2.section-title{
    text-align:center;
    margin:28px 0 12px; color:var(--accent); font-weight:400; letter-spacing:.02em;font-size:1.2rem;
  }
  .card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;margin:14px 0;}
  .grid{display:grid;gap:12px}
  @media (min-width: 760px){
    .grid.cols-2{grid-template-columns:1fr 1fr}
    .grid.cols-3{grid-template-columns:repeat(3,1fr)}
  }
  .muted{color:var(--muted)}
  .center{text-align:center}
  .small{font-size:1rem}
  .btn{
    display:inline-flex;align-items:center;justify-content:center;gap:8px;
    padding:12px 14px;border-radius:10px;background:var(--accent);color:#313131;font-weight:700;border:none;cursor:pointer;
    box-shadow:0 6px 18px rgba(237,172,177,.35);font-size:.92rem;
    white-space:nowrap;
  }
  .btn.ghost{background:#fff;border:1px solid #eee;box-shadow:none}
  .btns{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
  .divider{height:1px;background:linear-gradient(90deg,transparent,#eee,transparent);margin:18px 0}

  /* details */
  details{border-radius:12px;padding:0;overflow:hidden;border:none}
  details summary{cursor:pointer;list-style:none;font-weight:800;display:flex;align-items:center;justify-content:space-between;font-size:.95rem;padding:14px 16px;}
  details summary::marker{display:none}
  details .rows{padding:12px 16px 16px}
  .row{display:flex;gap:10px;align-items:center;justify-content:center;flex-wrap:wrap}
  .copy{font-size:.78rem;border:1px dashed #7774;border-radius:999px;padding:4px 8px;cursor:pointer}
  details.groom{ background: #eaf6ff; border:1px solid #d5ecff }
  details.bride{ background: #fff0f5; border:1px solid #ffe1ea }

  /* account */
  .account details{ border:1px solid #ffe3ef }
  .account details.groom{ background:#eaf6ff; border-color:#d5ecff }
  .account details.bride{ background:#fff0f5; border-color:#ffe1ea }
  .account details summary{ background:transparent }
  .account .rows{padding-top:8px}
  .account .row{justify-content:space-between; gap:8px}
  .account .row span.copy{ background:#fff; }

  /* countdown */
  .countdown{display:flex;justify-content:center;gap:8px;margin-top:8px}
  .cd-box{width:72px;height:72px;border-radius:12px;background:#fff;box-shadow:var(--shadow);display:flex;flex-direction:column;align-items:center;justify-content:center}
  .cd-number{font-size:1.2rem;font-weight:800}
  .cd-label{font-size:.7rem;color:var(--muted)}

  /* gallery */
  .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
  .gallery picture{ display:block; aspect-ratio: 3 / 4; }
  .gallery picture > img{ width:100%; height:100%; object-fit:cover; display:block; }
  .gallery img{width:100%;aspect-ratio:3/4;object-fit:cover;border-radius:10px;cursor:pointer}
  .no-save{ -webkit-user-drag: none; user-select:none; -webkit-user-select:none }
  .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:50}
  .lightbox.open{display:flex}
  .lightbox .lb-inner{position:relative;max-width:92vw;max-height:86vh;display:flex;align-items:center;justify-content:center}
  .lightbox img{max-width:92vw;max-height:86vh;border-radius:12px;box-shadow:0 8px 40px rgba(0,0,0,.5);object-fit:contain;touch-action:none;}
  .lightbox .prev, .lightbox .next{
    position:absolute; top:50%; transform:translateY(-50%);
    width:44px;height:44px;border-radius:999px;background:rgba(255,255,255,.22);border:1px solid rgba(255,255,255,.55);
    display:flex;align-items:center;justify-content:center;font-size:22px;color:#fff;cursor:pointer;user-select:none;backdrop-filter:blur(4px)
  }
  .lightbox .prev{ left:-54px } .lightbox .next{ right:-54px }

  /* ===== INTERVIEW: 중앙 콤팩트 + 더 촘촘 ===== */
  .interview{
    padding:12px 10px; background:#fff7fa; border-radius:14px
  }
  .interview .title{
    letter-spacing:.02em;color:var(--accent);text-align:center;
    font-size:1.08rem; margin:2px 0 4px;
  }
  .interview .subtitle{
    font-size:.86rem;text-align:center;margin:0 0 8px 0;color:#777;
  }
  .interview-inner{
    max-width:460px; margin:0 auto;   /* 가운데로 좁게 모으기 */
  }
  .inter-q{
    font-size:.96rem;margin:8px 0 4px;text-align:center;font-weight:800
  }
  .bubble_container{
    display:grid; gap:4px; padding:0 4px; margin:0 0 8px 0;
  }
  .bubble_box{
    display:flex;flex-direction:column;gap:3px;
    max-width:460px; margin:0 auto; width:100%;
  }
  .bubble_box.left{ align-items:flex-start; justify-self:start }
  .bubble_box.right{ align-items:flex-end; justify-self:end }
  .bubble_box .name{ font-weight:900; font-size:.88rem; color:#777; line-height:1.15 }
  .bubble_text{
    display:inline-block;border-radius:12px;padding:8px 10px;
    font-size:.95rem; line-height:1.45; box-shadow:var(--shadow);
    max-width:min(100%, 92vw);
  }
  .left .bubble_text{ background:#eaf6ff }
  .right .bubble_text{ background:var(--accent); color:#313131 }

  /* reveal (짧게) */
  .bubble_box { opacity:0; transform:translateY(12px); transition:opacity .28s ease, transform .28s ease }
  .bubble_box.show { opacity:1; transform:none }
  .interview .interview_q, .interview .inter-q { opacity:.001; transform:translateY(8px); transition:opacity .24s ease, transform .24s ease }
  .interview .interview_q.show, .interview .inter-q.show { opacity:1; transform:none }

  /* 모바일 더 타이트 */
  @media (max-width:430px){
    .interview-inner{ max-width:420px }
    .inter-q{ font-size:.92rem; margin:8px 0 3px }
    .bubble_text{ font-size:.92rem; padding:7px 9px; line-height:1.42 }
    .bubble_box .name{ font-size:.84rem }
    .bubble_container{ gap:3px; margin-bottom:6px }
  }

  /* ===== INVITATION 시(시구): 줄 간격 촘촘 + 공백 제거 ===== */
  #invitation .poem{
    font-size:1.02rem;
    line-height:1.45;       /* 촘촘하게 */
    white-space:pre-line;   /* 개행만 유지, 빈 줄 없음 */
    margin:0;               /* 위아래 마진 제거 */
  }
  #invitation .small{ font-size:1.0rem }

  /* 국화 아이콘 */
  .icon-chry{ display:inline-flex; vertical-align:-2px; margin-right:4px }
  .icon-chry svg{ width:1.05em; height:1.05em; }

  /* ===== LOCATION: 버튼 1줄 3등분(가로 스크롤 제거) ===== */
  .navi{
    display:grid;
    grid-template-columns: repeat(3, 1fr);
    gap:8px; align-items:center; justify-items:center;
    padding:2px 0; overflow-x:hidden;
  }
  .navi .btn{ width:100%; flex:none; padding:10px 8px; font-size:.9rem; min-width:0; }
  @media (max-width:380px){
    .navi .btn{ font-size:.86rem; padding:9px 6px }
  }

  footer{padding:28px 0 16px;text-align:center;color:var(--muted);font-size:.9rem}

  /* ===== 히어로 단어 레이어(은은한 3D 플로팅) ===== */
  .hero-words{ position:absolute; inset:0; z-index:2; pointer-events:none; }
  .hero-words .w{
    position:absolute; font-family: var(--font-fancy);
    font-weight:800; letter-spacing:.02em;
    opacity:.14; filter: blur(.2px) drop-shadow(0 2px 6px rgba(0,0,0,.25));
    mix-blend-mode: screen; color:#fff; transform: translateZ(0);
    white-space:nowrap;
    animation: floatWord linear infinite;
  }
  @keyframes floatWord{
    0%{   transform: translate3d(var(--x,0), var(--yStart,0), 0) scale(var(--s,1)) rotate(var(--r1,.0deg)); }
    50%{  transform: translate3d(calc(var(--x,0) + var(--dx,0px)), calc(var(--yMid,0) - 6%), 0) scale(calc(var(--s,1) * 1.04)) rotate(var(--r2,.0deg)); }
    100%{ transform: translate3d(calc(var(--x,0) + calc(var(--dx,0px)*2)), var(--yEnd,0), 0) scale(var(--s,1)) rotate(var(--r1,.0deg)); }
  }
  </style>
</head>
<body>

  <header class="wrap">
    <div class="hero">
      <picture>
        <source data-srcset="
          https://smjhwedding.github.io/hero-1920.avif 1920w,
          https://smjhwedding.github.io/hero-1280.avif 1280w,
          https://smjhwedding.github.io/hero-768.avif 768w
        " type="image/avif" sizes="100vw">
        <source data-srcset="
          https://smjhwedding.github.io/hero-1920.webp 1920w,
          https://smjhwedding.github.io/hero-1280.webp 1280w,
          https://smjhwedding.github.io/hero-768.webp 768w
        " type="image/webp" sizes="100vw">
        <img
          class="hero-media"
          src="./KakaoTalk_20250907_195152669.jpg"
          alt=""
          width="1920" height="1080"
          fetchpriority="high" decoding="async">
      </picture>

      <div class="dday-badge" id="ddayTop">D-90</div>

      <!-- 보케 파티클 레이어 (Canvas) -->
      <div class="spark-layer" aria-hidden="true" id="sparkLayer"></div>

      <div class="hero-inner">
        <!-- 메인 이름 표시는 제거 -->
        <div class="date">
          <span class="d1">2025년 12월 13일&nbsp;&nbsp;(토) 오후 2시</span>
          <span class="d2">더에스비웨딩컨벤션</span>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- INVITATION -->
    <section id="invitation" class="card center">
      <h2 class="section-title">INVITATION</h2>
      <!-- 빈 줄 없이, 모든 줄 촘촘하게 -->
      <p class="small poem">봄처럼 포근하고 여름처럼 뜨겁고
가을처럼 충만하고 겨울처럼 설레는
사람을 만났습니다.
이제 서로의
모든 계절을 지나려 합니다.
가장 빛나는 날, 늘 곁에서 아껴준
고마운 분들을 초대합니다.</p>
      <div class="divider"></div>
      <div class="small">
        <p><span class="muted">이제영, 윤혜정의 아들</span> <b>신랑 이상민</b></p>
        <p>
          <span class="muted">
            <span class="icon-chry" aria-hidden="true">
              <!-- Chrysanthemum(국화) inline SVG -->
              <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="국화">
                <circle cx="24" cy="24" r="4.5" fill="#ffdf7e"/>
                <g fill="#f2b7c0">
                  <circle cx="24" cy="10" r="5.2"/>
                  <circle cx="36.5" cy="14.5" r="4.8"/>
                  <circle cx="40" cy="26" r="5.4"/>
                  <circle cx="31.5" cy="36" r="5.1"/>
                  <circle cx="16.5" cy="36" r="5.1"/>
                  <circle cx="8" cy="26" r="5.4"/>
                  <circle cx="11.5" cy="14.5" r="4.8"/>
                </g>
                <g fill="#ffd6de" opacity=".95">
                  <circle cx="24" cy="6.5" r="3.2"/>
                  <circle cx="39.5" cy="12" r="3.0"/>
                  <circle cx="42" cy="26" r="3.2"/>
                  <circle cx="33.5" cy="39" r="3.1"/>
                  <circle cx="14.5" cy="39" r="3.1"/>
                  <circle cx="6" cy="26" r="3.2"/>
                  <circle cx="8.5" cy="12" r="3.0"/>
                </g>
              </svg>
            </span>
            이종명, 이정연의 딸
          </span>
          <b> 신부 이진희</b>
        </p>
      </div>
    </section>

    <!-- ACCOUNT NUMBER -->
    <section class="account">
      <h2 class="section-title">ACCOUNT NUMBER</h2>
      <p class="small center muted">부담 갖지 않으셔도 됩니다.<br>필요하신 분만 이용해주세요.</p>

      <div class="grid cols-2">
        <details class="groom">
          <summary>신랑측 <span>▼</span></summary>
          <div class="rows small">
            <div class="row" style="justify-content:flex-start"><b>신랑 계좌</b></div>
            <div class="row" style="justify-content:flex-start">카카오뱅크 <span class="muted">(예금주 : 이상민)</span></div>
            <div class="row"><span>계좌번호</span> <span class="copy" data-copy="79421200552">79421200552</span></div>
          </div>
        </details>

        <details class="bride">
          <summary>신부측 <span>▼</span></summary>
          <div class="rows small">
            <div class="row" style="justify-content:flex-start"><b>신부 계좌</b></div>
            <div class="row" style="justify-content:flex-start">하나은행 <span class="muted">(예금주 : 이진희)</span></div>
            <div class="row"><span>계좌번호</span> <span class="copy" data-copy="73291008224907">73291008224907</span></div>

            <div class="divider"></div>

            <div class="row" style="justify-content:flex-start"><b>신부혼주 계좌</b></div>
            <div class="row" style="justify-content:flex-start">지역농축협 <span class="muted">(예금주 : 이정연)</span></div>
            <div class="row"><span>계좌번호</span> <span class="copy" data-copy="13003652103656">13003652103656</span></div>
          </div>
        </details>
      </div>
    </section>

    <!-- D-DAY -->
    <section class="card center" id="dday">
      <h2 class="section-title">D-DAY</h2>
      <p class="small">상민 ♥ 진희 결혼식이 <b><span id="dtext">90일</span></b> 남았습니다.</p>
      <div class="countdown" role="timer" aria-live="polite">
        <div class="cd-box"><div class="cd-number" id="cd-days">0</div><div class="cd-label">DAYS</div></div>
        <div class="cd-box"><div class="cd-number" id="cd-hours">0</div><div class="cd-label">HOURS</div></div>
        <div class="cd-box"><div class="cd-number" id="cd-mins">0</div><div class="cd-label">MINUTES</div></div>
        <div class="cd-box"><div class="cd-number" id="cd-secs">0</div><div class="cd-label">SECONDS</div></div>
      </div>
    </section>

    <!-- GALLERY -->
    <section>
      <h2 class="section-title">GALLERY</h2>
      <p class="small muted center">사진을 클릭하면 크게 볼 수 있어요.<br>좌우 화살표로 넘길 수 있어요.</p>
      <div class="gallery card" id="gallery">
        <picture>
          <source data-srcset="
            https://smjhwedding.github.io/gallery1-1024.avif 1024w,
            https://smjhwedding.github.io/gallery1-768.avif 768w,
            https://smjhwedding.github.io/gallery1-512.avif 512w
          " type="image/avif" sizes="(min-width:760px) 33vw, 33vw">
          <source data-srcset="
            https://smjhwedding.github.io/gallery1-1024.webp 1024w,
            https://smjhwedding.github.io/gallery1-768.webp 768w,
            https://smjhwedding.github.io/gallery1-512.webp 512w
          " type="image/webp" sizes="(min-width:760px) 33vw, 33vw">
          <img class="no-save"
               src="./KakaoTalk_20250908_010410211_01.jpg"
               data-full="./KakaoTalk_20250908_010410211_01.jpg"
               alt="gallery1"
               width="1024" height="1365"
               loading="lazy" decoding="async"
               draggable="false" oncontextmenu="return false" onmousedown="return false">
        </picture>

        <picture>
          <source data-srcset="
            https://smjhwedding.github.io/gallery2-1024.avif 1024w,
            https://smjhwedding.github.io/gallery2-768.avif 768w,
            https://smjhwedding.github.io/gallery2-512.avif 512w
          " type="image/avif" sizes="(min-width:760px) 33vw, 33vw">
          <source data-srcset="
            https://smjhwedding.github.io/gallery2-1024.webp 1024w,
            https://smjhwedding.github.io/gallery2-768.webp 768w,
            https://smjhwedding.github.io/gallery2-512.webp 512w
          " type="image/webp" sizes="(min-width:760px) 33vw, 33vw">
          <img class="no-save"
               src="./KakaoTalk_20250908_010410211.jpg"
               data-full="./KakaoTalk_20250908_010410211.jpg"
               alt="gallery2"
               width="1024" height="1365"
               loading="lazy" decoding="async"
               draggable="false" oncontextmenu="return false" onmousedown="return false">
        </picture>
      </div>

      <div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
        <div class="lb-inner">
          <div class="prev" id="lbPrev" aria-label="이전">‹</div>
          <img class="no-save" alt="preview" draggable="false" oncontextmenu="return false" onmousedown="return false">
          <div class="next" id="lbNext" aria-label="다음">›</div>
        </div>
      </div>
    </section>

    <!-- INTERVIEW (중앙 콤팩트) -->
    <section class="card interview" id="interview">
      <div class="interview-inner">
        <h3 class="title">INTERVIEW</h3>
        <p class="subtitle">서로를 더 가까이</p>

        <p class="inter-q">핸드폰에 저장된 이름?</p>
        <div class="bubble_container">
          <div class="bubble_box left">
            <p class="name">상민</p>
            <div class="bubble_wrapper"><p class="bubble_text">찌니프</p></div>
          </div>
          <div class="bubble_box right">
            <p class="name">진희</p>
            <div class="bubble_wrapper"><p class="bubble_text">보스미니</p></div>
          </div>
        </div>

        <p class="inter-q">처음 본 순간 느낌?</p>
        <div class="bubble_container">
          <div class="bubble_box left">
            <p class="name">상민</p>
            <div class="bubble_wrapper"><p class="bubble_text">빨간 볼이 매력적이었어</p></div>
          </div>
          <div class="bubble_box right">
            <p class="name">진희</p>
            <div class="bubble_wrapper"><p class="bubble_text">부드러운 미소가 좋았어</p></div>
          </div>
        </div>

        <p class="inter-q">내 매력 포인트는?</p>
        <div class="bubble_container">
          <div class="bubble_box left">
            <p class="name">상민</p>
            <div class="bubble_wrapper"><p class="bubble_text">완벽한 성대모사</p></div>
          </div>
          <div class="bubble_box right">
            <p class="name">진희</p>
            <div class="bubble_wrapper"><p class="bubble_text">쏘옥 들어가는 보조개 😊</p></div>
          </div>
        </div>

        <p class="inter-q">내가 제일 좋아하는 음식은?</p>
        <div class="bubble_container">
          <div class="bubble_box left">
            <p class="name">상민</p>
            <div class="bubble_wrapper"><p class="bubble_text">엄청 빵순이!</p></div>
          </div>
          <div class="bubble_box right">
            <p class="name">진희</p>
            <div class="bubble_wrapper"><p class="bubble_text">또! 또!! 또!!! 제육</p></div>
          </div>
        </div>

        <p class="inter-q">10년 뒤 우리 모습은?</p>
        <div class="bubble_container">
          <div class="bubble_box left">
            <p class="name">상민</p>
            <div class="bubble_wrapper"><p class="bubble_text">아이와 함께 보드게임 하기</p></div>
          </div>
          <div class="bubble_box right">
            <p class="name">진희</p>
            <div class="bubble_wrapper"><p class="bubble_text">가족 모두 유니폼 입고 야구장 직관하기</p></div>
          </div>
        </div>
      </div>
    </section>

    <!-- LOCATION -->
    <section>
      <h2 class="section-title">LOCATION</h2>
      <div class="card">
        <p class="center"><b>더에스비웨딩컨벤션</b><br><span class="small muted">서울 동작구 보라매로5길 15</span></p>
        <div id="map" class="map" role="img" aria-label="예식장 지도"></div>
        <div class="navi">
          <a class="btn ghost" target="_blank"
            href="https://map.kakao.com/link/search/%EB%8F%99%EC%9E%91%EA%B5%AC%20%EB%B3%B4%EB%9D%BC%EB%A7%A4%EB%A1%9C5%EA%B8%B8%2015"
            rel="noopener">카카오맵</a>
          <a class="btn ghost" target="_blank"
            href="https://map.naver.com/p/search/%EC%84%9C%EC%9A%B8%20%EB%8F%99%EC%9E%91%EA%B5%AC%20%EB%B3%B4%EB%9D%BC%EB%A7%A4%EB%A1%9C5%EA%B8%B8%2015"
            rel="noopener">네이버지도</a>
          <a class="btn ghost" target="_blank"
            href="https://maps.google.com/?q=%EC%84%9C%EC%9A%B8%20%EB%8F%99%EC%9E%91%EA%B5%AC%20%EB%B3%B4%EB%9D%BC%EB%A7%A4%EB%A1%9C5%EA%B8%B8%2015%20%EB%8D%94%EC%97%90%EC%8A%A4%EB%B9%84%EC%9B%A8%EB%94%A9%EC%BB%A8%EB%B2%84%EC%85%98"
            rel="noopener">구글지도</a>
        </div>
      </div>
    </section>

    <!-- ICS / 캘린더 버튼 -->
    <section class="center" style="margin-top:12px">
      <div class="btns" style="justify-content:center">
        <a class="btn" id="btnAppleSamsung" href="#">아이폰/삼성 캘린더로 추가</a>
        <a class="btn ghost" id="btnGoogle" target="_blank" rel="noopener">구글 캘린더로 열기</a>
      </div>
      <p class="small muted" style="margin-top:6px">
        다운로드가 자동으로 시작되지 않으면<br>
        <a id="btnIcsDownload" href="https://smjhwedding.github.io/sangmin-jinhee-wedding-2025-12-13.ics" download="sangmin-jinhee-wedding-2025-12-13.ics">ICS 파일 직접 다운로드</a>
      </p>
      <p class="small muted" id="dlHint" style="margin-top:4px; display:none"></p>
    </section>

  </main>

  <footer>
    <div class="wrap small">
      © 2025 SANG MIN ♥ JIN HEE
    </div>
  </footer>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    /* 프로덕션일 때 webp/avif srcset 활성화 + 프리로드 */
    const isProd = location.hostname === 'smjhwedding.github.io';
    if (isProd) {
      document.querySelectorAll('source[data-srcset]').forEach(s => {
        s.setAttribute('srcset', s.getAttribute('data-srcset'));
      });
      const l = document.createElement('link');
      l.rel = 'preload'; l.as = 'image';
      l.href = 'https://smjhwedding.github.io/hero-1280.webp';
      l.setAttribute('imagesrcset', 'https://smjhwedding.github.io/hero-768.webp 768w, https://smjhwedding.github.io/hero-1280.webp 1280w, https://smjhwedding.github.io/hero-1920.webp 1920w');
      l.setAttribute('imagesizes', '100vw');
      document.head.appendChild(l);
    }

    /* reveal */
    const interTargets = document.querySelectorAll(
      '#interview .inter-q, #interview .interview_q, #interview .bubble_container > div, #interview .bubble_box'
    );
    interTargets.forEach(el => { el.style.removeProperty('opacity'); el.style.removeProperty('transform'); });

    const commonReveals = [
      ...document.querySelectorAll('.section-title'),
      ...document.querySelectorAll('.card'),
      ...document.querySelectorAll('.navi .btn'),
    ];
    commonReveals.forEach(el => el.classList.add('reveal'));

    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=> e.target.classList.toggle('show', e.isIntersecting));
    }, { threshold: 0.12, rootMargin: '0px 0px -6% 0px' });
    [...interTargets, ...commonReveals].forEach(el=> io.observe(el));

    /* 지도: 카카오 SDK 있으면 카카오, 없으면 구글 iframe */
    function initKakaoMap(){
      if(!window.kakao || !kakao.maps) return;
      const container = document.getElementById('map');
      const center = new kakao.maps.LatLng(37.490617, 126.921312);
      const map = new kakao.maps.Map(container, { center, level: 4 });
      new kakao.maps.Marker({ map, position: center });
    }
    if (document.getElementById('map')) {
      if (window.kakao && kakao.maps) initKakaoMap();
      else {
        document.getElementById('map').innerHTML =
          '<iframe title="map" width="100%" height="300" style="border:0" loading="lazy" referrerpolicy="no-referrer-when-downgrade" src="https://maps.google.com/maps?q=%EC%84%9C%EC%9A%B8%20%EB%8F%99%EC%9E%91%EA%B5%AC%20%EB%B3%B4%EB%9D%BC%EB%A7%A4%EB%A1%9C5%EA%B8%B8%2015&t=m&z=16&output=embed"></iframe>';
      }
    }

    /* D-DAY */
    const target = new Date("2025-12-13T14:00:00+09:00").getTime();
    const dtext  = document.getElementById('dtext');
    const el = {
      d: document.getElementById('cd-days'),
      h: document.getElementById('cd-hours'),
      m: document.getElementById('cd-mins'),
      s: document.getElementById('cd-secs'),
    };
    function refreshDday(diffMs){
      const sec = Math.floor(diffMs/1000);
      const d = Math.floor(sec/86400);
      const h = Math.floor((sec%86400)/3600);
      const m = Math.floor((sec%3600)/60);
      const s = sec%60;
      el.d.textContent = d; el.h.textContent = h; el.m.textContent = m; el.s.textContent = s;
      if (dtext) dtext.textContent = d + "일";
      const top = document.getElementById('ddayTop');
      if (top) top.textContent = "D-" + d;
    }
    function tick(){ const now = Date.now(); let diff = Math.max(0, target - now); refreshDday(diff); }
    tick(); setInterval(tick, 1000);

    /* 복사 버튼 */
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('.copy');
      if(!btn) return;
      const text = btn.dataset.copy || btn.textContent.trim();
      navigator.clipboard.writeText(text).then(()=>{
        if (!btn.dataset.old) btn.dataset.old = btn.textContent;
        btn.textContent = '복사됨';
        setTimeout(()=>{ btn.textContent = btn.dataset.old || text; delete btn.dataset.old; }, 1200);
      });
    });

    /* 라이트박스 */
    const thumbs = Array.from(document.querySelectorAll('#gallery picture img'));
    const lb = document.getElementById('lightbox');
    const lbImg = lb.querySelector('img');
    const prevBtn = document.getElementById('lbPrev');
    const nextBtn = document.getElementById('lbNext');
    let idx = 0, touchStartX = 0, touchEndX = 0;

    function openAt(i){
      idx = (i + thumbs.length) % thumbs.length;
      const t = thumbs[idx];
      const full = t.getAttribute('data-full');
      lbImg.src = full || t.currentSrc || t.src;
      lb.classList.add('open');
    }
    function closeLb(){ lb.classList.remove('open'); lbImg.src = ''; }
    function next(){ openAt(idx+1) }
    function prev(){ openAt(idx-1) }

    thumbs.forEach((img,i)=> img.addEventListener('click', ()=> openAt(i)));
    lb.addEventListener('click', (e)=>{ if(e.target === lb) closeLb(); });
    document.addEventListener('keydown', (e)=>{
      if(!lb.classList.contains('open')) return;
      if(e.key === 'Escape') closeLb();
      if(e.key === 'ArrowRight') next();
      if(e.key === 'ArrowLeft') prev();
    });
    nextBtn.addEventListener('click', (e)=>{ e.stopPropagation(); next(); });
    prevBtn.addEventListener('click', (e)=>{ e.stopPropagation(); prev(); });

    lbImg.addEventListener('touchstart', (e)=>{ touchStartX = e.changedTouches[0].clientX; }, {passive:true});
    lbImg.addEventListener('touchend', (e)=>{
      touchEndX = e.changedTouches[0].clientX;
      const delta = touchEndX - touchStartX;
      if(Math.abs(delta) > 40){ delta < 0 ? next() : prev(); }
    }, {passive:true});

    document.addEventListener('contextmenu', (e)=>{
      if(e.target.closest('#gallery') || e.target.closest('#lightbox')) e.preventDefault();
    });

    /* 캘린더 */
    (function(){
      const title = '상민 ♥ 진희 결혼식';
      const locationTxt = '더에스비웨딩컨벤션, 서울 동작구 보라매로5길 15';
      const details = '상민 ♥ 진희 결혼식';
      const dtStartZ = '20251213T050000Z';
      const dtEndZ   = '20251213T070000Z';

      const isProd = location.hostname === 'smjhwedding.github.io';
      const icsUrl = isProd ? 'https://smjhwedding.github.io/sangmin-jinhee-wedding-2025-12-13.ics' : '';

      const ics = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Wedding Invite//KR
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:wedding-sangmin-jinhee-20251213@example
SUMMARY:${title}
LOCATION:${locationTxt}
DESCRIPTION:${details}
DTSTART:${dtStartZ}
DTEND:${dtEndZ}
END:VEVENT
END:VCALENDAR`;

      const btnAppleSamsung = document.getElementById('btnAppleSamsung');
      const btnGoogle       = document.getElementById('btnGoogle');
      const btnIcsDownload  = document.getElementById('btnIcsDownload');
      const dlHint          = document.getElementById('dlHint');

      const gcalParams = new URLSearchParams({
        action:'TEMPLATE', text:title, details, location:locationTxt, dates:`${dtStartZ}/${dtEndZ}`
      });
      const gcalUrl = `https://calendar.google.com/calendar/render?${gcalParams.toString()}`;
      if (btnGoogle) btnGoogle.href = gcalUrl;

      (function setDownloadLink(){
        if (!btnIcsDownload) return;
        if (isProd && icsUrl){
          btnIcsDownload.href = icsUrl;
          btnIcsDownload.setAttribute('download','sangmin-jinhee-wedding-2025-12-13.ics');
        } else {
          try{
            const blob = new Blob([ics], { type:'text/calendar;charset=utf-8' });
            const blobUrl = URL.createObjectURL(blob);
            btnIcsDownload.href = blobUrl;
            btnIcsDownload.setAttribute('download','sangmin-jinhee-wedding-2025-12-13.ics');
          }catch(_){}
        }
      })();

      function openHostedICS(){ if (!icsUrl) return false; window.open(icsUrl, '_blank'); return true; }
      function openIcsLocal(){
        try{
          const blob = new Blob([ics], { type:'text/calendar;charset=utf-8' });
          const url = URL.createObjectURL(blob);
          window.open(url, '_blank');
          setTimeout(()=> URL.revokeObjectURL(url), 10000);
        }catch(_){}
      }

      if (btnAppleSamsung){
        btnAppleSamsung.addEventListener('click', (e)=>{
          e.preventDefault();
          const ua = navigator.userAgent || '';
          const isAndroid = /Android/i.test(ua);
          const isKakao   = /KAKAOTALK/i.test(ua);

          if (isProd && icsUrl){
            openHostedICS();
            if (isAndroid){
              const msg = isKakao
                ? '다운로드가 시작되거나 새 창이 열립니다. 카카오톡 우측 상단(⋮) → 다운로드 관리에서 .ics 파일을 탭해 주세요.'
                : '다운로드가 시작되거나 새 창이 열립니다. 알림 또는 내 파일 > Download에서 .ics 파일을 탭해 주세요.';
              const tip = document.createElement('div');
              tip.textContent = msg;
              tip.style.cssText = 'position:fixed;left:50%;bottom:22px;transform:translateX(-50%);background:rgba(0,0,0,.85);color:#fff;padding:10px 12px;border-radius:10px;font-size:12px;z-index:9999;max-width:92vw;text-align:center;white-space:pre-line';
              document.body.appendChild(tip);
              setTimeout(()=> tip.remove(), 4200);
              if (dlHint){
                dlHint.style.display='block';
                dlHint.textContent='안드로이드: 알림/다운로드 목록에서 .ics 파일을 탭하면 캘린더로 열립니다.';
              }
            }
          } else {
            openIcsLocal();
          }
        });
      }
    })();

    /* 보케 파티클(Canvas) */
    (function bokehParticles(){
      const layer = document.getElementById('sparkLayer');
      if(!layer) return;
      const cvs = document.createElement('canvas');
      const ctx = cvs.getContext('2d');
      layer.appendChild(cvs);

      let w, h, dpr;
      function resize(){
        dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        w = layer.clientWidth; h = layer.clientHeight;
        cvs.width = Math.floor(w * dpr); cvs.height = Math.floor(h * dpr);
        cvs.style.width = w + 'px'; cvs.style.height = h + 'px';
      }
      resize(); window.addEventListener('resize', resize);

      const colors = [
        [255, 236, 214],
        [255, 213, 163],
        [253, 222, 229],
        [246, 189, 197],
        [255, 244, 224],
      ];

      const particles = [];
      const COUNT = 46;
      const rMin = 6, rMax = 22;

      function rnd(a, b){ return a + Math.random()*(b-a); }
      function pick(arr){ return arr[(Math.random()*arr.length)|0]; }

      function makeOne(yStart){
        const r = rnd(rMin, rMax);
        const c = pick(colors);
        return {
          x: rnd(-w*0.1, w*1.1),
          y: typeof yStart==='number' ? yStart : rnd(h*0.5, h*1.15),
          r,
          vy: rnd(-0.25, -0.08),
          drift: rnd(-0.12, 0.12),
          alpha: rnd(0.35, 0.85),
          rgb: c,
          tw: rnd(2.2, 4.2),
          t0: Math.random()*Math.PI*2
        };
      }

      for(let i=0;i<COUNT;i++) particles.push(makeOne());

      let scrollY = window.scrollY || 0;
      window.addEventListener('scroll', () => { scrollY = window.scrollY || 0; });

      function draw(){
        ctx.globalCompositeOperation = 'source-over';
        ctx.clearRect(0,0,cvs.width,cvs.height);

        const parallax = (scrollY * 0.02) * dpr;

        for(let i=0;i<particles.length;i++){
          const p = particles[i];
          p.x += p.drift; p.y += p.vy;
          const twinkle = 0.5 + 0.5*Math.sin((performance.now()/1000)/p.tw + p.t0);
          const a = Math.max(0, Math.min(1, p.alpha * (0.65 + 0.35*twinkle)));

          if (p.y < -40) { particles[i] = makeOne(h + rnd(10, 120)); continue; }

          ctx.globalCompositeOperation = 'lighter';
          const [r,g,b] = p.rgb;
          const R = p.r * dpr;

          const grad = ctx.createRadialGradient((p.x*dpr), (p.y*dpr - parallax), R*0.2, (p.x*dpr), (p.y*dpr - parallax), R);
          grad.addColorStop(0, `rgba(${r},${g},${b},${a*0.95})`);
          grad.addColorStop(0.6, `rgba(${r},${g},${b},${a*0.35})`);
          grad.addColorStop(1, `rgba(${r},${g},${b},0)`);
          ctx.fillStyle = grad;
          ctx.beginPath(); ctx.arc((p.x*dpr), (p.y*dpr - parallax), R, 0, Math.PI*2); ctx.fill();

          ctx.globalAlpha = a*0.12;
          ctx.beginPath(); ctx.arc((p.x*dpr), (p.y*dpr - parallax), R*0.35, 0, Math.PI*2);
          ctx.fillStyle = `rgba(255,255,255,1)`; ctx.fill();
          ctx.globalAlpha = 1;
        }
        requestAnimationFrame(draw);
      }
      requestAnimationFrame(draw);
    })();

    /* 히어로 단어 레이어(HTML 변경 없이 동적 삽입) */
    (function heroWords(){
      const hero = document.querySelector('.hero');
      if(!hero) return;
      const layer = document.createElement('div');
      layer.className = 'hero-words';
      hero.appendChild(layer);

      const words = [
        'Wedding', 'Love', 'Forever', '우리의 날', '축복', 'S & J', 'Happily Ever After'
      ];
      const rect = hero.getBoundingClientRect();
      const W = rect.width || window.innerWidth;

      function addWord(text, i){
        const span = document.createElement('span');
        span.className = 'w';
        span.textContent = text;

        const x = Math.random() * 60 + 20;      // 20% ~ 80%
        const yS = Math.random() * 40 + 55;     // 55% ~ 95%
        const yE = yS - (8 + Math.random()*10); // 위로 살짝
        const dx = (Math.random() * 8 - 4) + 'vw';
        const s = (Math.random()*0.3 + 0.9).toFixed(2);
        const r1 = (Math.random() * 1 - 0.5).toFixed(2) + 'deg';
        const r2 = (Math.random() * 1 - 0.5).toFixed(2) + 'deg';
        const dur = (16 + Math.random()*10).toFixed(1) + 's';
        const delay = (-Math.random()*10).toFixed(1) + 's';
        const size = Math.round((W<=420? 18: 22) + Math.random()*12);

        span.style.fontSize = size + 'px';
        span.style.left = x + '%';
        span.style.setProperty('--x', '-50%'); // 가운데 정렬 보정
        span.style.setProperty('--yStart', yS + '%');
        span.style.setProperty('--yMid', (yS - 4) + '%');
        span.style.setProperty('--yEnd', yE + '%');
        span.style.setProperty('--dx', dx);
        span.style.setProperty('--s', s);
        span.style.setProperty('--r1', r1);
        span.style.setProperty('--r2', r2);
        span.style.animationDuration = dur;
        span.style.animationDelay = delay;

        layer.appendChild(span);
      }

      const count = 9;
      for(let i=0;i<count;i++){
        addWord(words[i % words.length], i);
      }

      let to;
      window.addEventListener('resize', ()=>{
        clearTimeout(to);
        to = setTimeout(()=>{
          const W2 = hero.getBoundingClientRect().width || window.innerWidth;
          layer.querySelectorAll('.w').forEach(el=>{
            const base = (W2<=420? 18: 22);
            const jitter = Math.random()*12;
            el.style.fontSize = Math.round(base + jitter) + 'px';
          });
        }, 120);
      });
    })();
  });
  </script>

</body>
</html>
